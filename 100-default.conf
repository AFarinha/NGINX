#https://www.digitalocean.com/community/tutorials/understanding-nginx-http-proxying-load-balancing-buffering-and-caching
#Configuring a Proxy Cache


server {
    listen       80;
    server_name  localhost;

    set $skipcache 0;

     if ($request_uri ~* "/login"){
      set $skipcache 1;
     }

    location / {

	 proxy_cache_bypass $skipcache;
 	 proxy_no_cache $skipcache;
   	 proxy_cache backcache;

    	 add_header X-Proxy-Cache $upstream_cache_status;
 	 proxy_pass http://127.0.0.1:3000;
    }
}

